version: "2"

services:
  dev:
    image: ruby:3.0@sha256:f6c236c1474acd83216ccacbaf7019778cbaea73c8048652087a4b64a862af63
    volumes:
      - .:/work
      - ruby3.0-bundle-cache:/usr/local/bundle
    environment:
      BUNDLE_GEMFILE: /work/Gemfile
      AWS_ACCESS_KEY_ID:
      AWS_SECRET_ACCESS_KEY:
      AWS_SESSION_TOKEN:
      AWS_REGION: ap-southeast-2
    working_dir: /work
    command: ["bash"]

volumes:
  ruby3.0-bundle-cache:
    external: true
