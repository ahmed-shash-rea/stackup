version: "2"

services:
  dev:
    image: ruby:2.6@sha256:83963ce90bf49a1e7baaf1bc73e1d57ae8f631949452c3dfcddf8fe8402c64b8
    volumes:
      - .:/work
      - ruby2.6-bundle-cache:/usr/local/bundle
    environment:
      BUNDLE_GEMFILE: /work/Gemfile
      AWS_ACCESS_KEY_ID:
      AWS_SECRET_ACCESS_KEY:
      AWS_SESSION_TOKEN:
      AWS_REGION: ap-southeast-2
    working_dir: /work
    command: ["bash"]

volumes:
  ruby2.6-bundle-cache:
    external: true
